# launch.json to DEBUG:

# {
#   "name": "Eval Model",
#   "type": "debugpy",
#   "request": "launch",
#   "program": "${file}",
#   "console": "integratedTerminal",
#   "args": [
#       "--settings_path",
#       "scripts/settings.yaml",
#   ],
#   "justMyCode": false,
#   "purpose": [
#       "debug-in-terminal"
#   ]
# }

# RUN:

# python scripts/eval_model.py --settings_path scripts/settings.yaml

lm_eval_settings:
  autorization_token: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJzTjJsWV8wUkhhdll1NEVmS21MZWJ4TmpzODhzNFdHUzZvQmV1UFRjVzhFIn0.eyJleHAiOjE3MjY3ODE1NDcsImlhdCI6MTcyNjc2MzU0NywianRpIjoiY2UzY2Y4YzEtMjM2NS00NGFmLTg0MzMtNzdiZjBiM2Y2ZTllIiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmRldi5uZW9zcGFjZS5haS9yZWFsbXMvbmVvc3BhY2UiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiMGZjYzVhYTktZWUzYS00ZWI4LTk3ZGQtZDJmYzYzYWU4M2M4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiMTVkMjBjMGMtMTJmYy00ZDg0LTg4YjQtY2ZkNzVmZDA3Mzc1Iiwic2lkIjoiZDQ5OWUwNDAtNmE4Zi00MWZmLWE0MmMtNDM3MjZkN2M0MWMxIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vbG9jYWxob3N0OjgwMDAvKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1uZW9zcGFjZSIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6ImVtYWlsIHByb2ZpbGUiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IklzYWFjIGNhbWFyZ29zIiwic3BhY2VzIjoiW1wiYTg3YzA5YjgtMmIyOC00NmY5LTlhNDAtMGViYTkzZjA4MzBiXCJdIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiaXNhYWNAbmVvc3BhY2UuYWkiLCJnaXZlbl9uYW1lIjoiSXNhYWMiLCJmYW1pbHlfbmFtZSI6ImNhbWFyZ29zIiwiZW1haWwiOiJpc2FhY0BuZW9zcGFjZS5haSJ9.W01dLWQcnYR2gwUmV0vyItSb546KIvsz65M5MQ97SdbNiLzEnD7V1VOyrw9tgQLP7HENJFR_xrPlHndZTRu6oOAgWhI6EZjnvaYmZB3ImFS_gYJtMtzqPXQwLTHdV4uuTKm_VZHTShQEkb8syOOYGcMKTN0ivPrpajjWpkMQ3tVS2cI-B69ZUWBFCUowWF1JzcrrRxV4qr71p78o6l9siQkTKmkIZKnHLuaQghWTbx_srJTVOyRrOL_jCZLdYy79fiYCvl0sUUZLopF7kEqJ2wryGrw8AOuS1K28zFtv4fn7L6VyrBLu1ChXSWKXlokPlrTTMZJlbYOWFefJ2mi_9Q"
  url: "https://portal.api.dev.neospace.ai/mercury/v2/spaces/a87c09b8-2b28-46f9-9a40-0eba93f0830b/models"
  model_checkpoint:  
    - "/cortex-cycles/neolang-pre-8b-with-sft-dataset-weight-decay-grouped/executions/73f79cd5-9ef5-4d42-99f3-89d9d8f684bc/jobs/neolang-pre-8b-with-sft-dataset_v3_corrected_mechanics-weight-decay-grouped/epoch_000011_step_001364"
    #- "/cortex-cycles/neolang-pre-8b-with-sft-dataset_v3_corrected_mechanics/executions/e52e09e6-e394-4418-b731-885a7cdc3c47/jobs/neolang-pre-8b-with-sft-dataset_v3_corrected_mechanics/epoch_000011_step_001364"
    #- "/cortex-cycles/neolang-pre-8b-large-data-eval-test/executions/3364c614-ed11-4ed6-b993-2058a238c931/jobs/neolang-pre-8b-large-data-eval-test/epoch_000002_step_000010"
    #- "/cortex/outputs/finetuning/tests-joao/train-llama8B-from-cosine_annealing/checkpoints/epoch_000006" 
    # - "/cortex/models/base/llama-3.1-8b"
  model: "local-completions"
  model_name: 'eval-test'
  tasks: 
    - "minhas_vantagens_gsm8k"
    - "minhas_vantagens"
    - "minhas_vantagens_multiple_choice_new"
    - "minhas_vantagens_human"
  metrics: 
    - "exact_match"
    - "acc"
    - "acc"
    - "acc"
  metrics_filter: 
    - "flexible-extract"
    - "none"
    - "none"
    - "none"
  output_path: "results/" 
  num_concurrent: 20  
  max_retries: 3
  tokenized_requests: false
  delete_result_after_preprocess: true
  categoric_column: ["flux", "subject", "category"]
